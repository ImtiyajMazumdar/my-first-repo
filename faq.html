<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAQ - Bangladesh Open University</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <style>
        .faq-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        .faq-question {
            background-color: #f9fafb;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .faq-answer {
            display: none;
            padding: 10px;
            background-color: #eef2f7;
            margin-top: 5px;
            border-radius: 5px;
        }
        .form-container {
            margin-top: 20px;
        }
        .question-entry {
            background-color: #f9fafb;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        .loading {
            text-align: center;
            color: #666;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <header class="bg-blue-900 text-white py-4">
        <div class="container mx-auto text-center">
            <h1 class="text-3xl font-bold">Bangladesh Open University</h1>
            <h2 class="text-xl mt-2">FAQ Section</h2>
            <nav class="mt-4">
                <a href="index.html" class="text-white hover:text-gray-300">Back to Home</a>
            </nav>
        </div>
    </header>

    <main class="container mx-auto py-8">
        <section class="bg-white p-8 rounded-lg shadow-md faq-container">
            <h3 class="text-lg font-semibold mb-4">Frequently Asked Questions</h3>
            <div id="faqSection" class="space-y-2">
                <div class="faq-question" onclick="toggleAnswer(this)">What are the admission requirements?</div>
                <div class="faq-answer">You need a minimum SSC and HSC result of 3.0 GPA, along with a valid birth certificate.</div>
                <div class="faq-question" onclick="toggleAnswer(this)">When does the semester start?</div>
                <div class="faq-answer">The semester typically starts in January and July each year.</div>
                <div class="faq-question" onclick="toggleAnswer(this)">How can I contact support?</div>
                <div class="faq-answer">You can email support@bou.edu or call +880123456789.</div>
            </div>

            <div class="form-container">
                <h3 class="text-lg font-semibold mb-4 mt-6">Ask a Question</h3>
                <textarea id="newQuestion" placeholder="State your problem or question here..." class="w-full p-2 mb-2 border rounded" rows="3"></textarea>
                <button onclick="submitQuestion()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Submit Question</button>
                <div id="questionMessage" class="mt-2"></div>
            </div>

            <h3 class="text-lg font-semibold mb-4 mt-6">Submitted Questions</h3>
            <div id="questionList" class="space-y-4">
                <p class="loading">Loading questions...</p>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-4 text-center">
        <p>Â© 2025 Bangladesh Open University. All Rights Reserved.</p>
    </footer>

    <script type="module">
        // Import the functions you need from the SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp, orderBy } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCjy4GrQYBzNXY1gINaL2X7KZX7mOJbObo",
            authDomain: "bou-faq-project.firebaseapp.com",
            projectId: "bou-faq-project",
            storageBucket: "bou-faq-project.firebasestorage.app",
            messagingSenderId: "1052902727608",
            appId: "1:1052902727608:web:73fdd0ae2c4b9e5a91394d"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Toggle FAQ answer visibility
        window.toggleAnswer = function(element) {
            const answer = element.nextElementSibling;
            answer.style.display = answer.style.display === 'block' ? 'none' : 'block';
        };

        // Submit a new question
        window.submitQuestion = function() {
            const question = document.getElementById('newQuestion').value.trim();
            const messageDiv = document.getElementById('questionMessage');

            if (question) {
                addDoc(collection(db, 'questions'), {
                    text: question,
                    timestamp: serverTimestamp(),
                    reply: null
                }).then(() => {
                    document.getElementById('newQuestion').value = '';
                    messageDiv.textContent = 'Question submitted successfully!';
                    messageDiv.className = 'text-green-500 mt-2';
                    setTimeout(() => messageDiv.textContent = '', 3000);
                }).catch(error => {
                    console.error('Error submitting question:', error);
                    messageDiv.textContent = 'Error submitting question. Please try again.';
                    messageDiv.className = 'text-red-500 mt-2';
                });
            } else {
                messageDiv.textContent = 'Please enter a question.';
                messageDiv.className = 'text-red-500 mt-2';
            }
        };

        // Fetch and display submitted questions
        const questionList = document.getElementById('questionList');
        onSnapshot(collection(db, 'questions'), orderBy('timestamp', 'desc'), (snapshot) => {
            questionList.innerHTML = '<p class="loading">Loading questions...</p>';
            if (snapshot.empty) {
                questionList.innerHTML = '<p>No questions submitted yet.</p>';
                return;
            }

            questionList.innerHTML = '';
            snapshot.forEach(doc => {
                const data = doc.data();
                const entry = document.createElement('div');
                entry.className = 'question-entry';
                entry.innerHTML = `
                    <p><strong>Question:</strong> ${data.text || 'N/A'}</p>
                    <p><strong>Submitted:</strong> ${data.timestamp ? new Date(data.timestamp.toDate()).toLocaleString() : 'N/A'}</p>
                    <p><strong>Reply:</strong> ${data.reply || 'Pending'}</p>
                `;
                questionList.appendChild(entry);
            });
        }, (error) => {
            questionList.innerHTML = '<p class="text-red-500">Error loading questions. Please try again later.</p>';
            console.error('Error fetching data:', error);
        });
    </script>
</html>